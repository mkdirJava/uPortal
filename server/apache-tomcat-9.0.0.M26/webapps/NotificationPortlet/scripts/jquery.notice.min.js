var upnotice=upnotice||{};if(!upnotice.init){upnotice.init=true;(function(){var c={selectors:{template:".template",title:".title",body:".body",link:".link",actions:".notification-actions",actionTemplate:".action-template",summaryTemplate:".summary-template"},readyCallback:function(){}};function a(e,d,f){e.ajax({type:"POST",url:d.invokeNotificationServiceUrl,async:false,success:function(){b(e,d,f)}})}function b(e,d,f){e.ajax({url:d.getNotificationsUrl,type:"POST",dataType:"json",success:function(g){feed=g.feed;f(feed)},error:function(){container.html(" ").text("AJAX failed. ~ THE END ~")}})}upnotice.show=function(k,d,g){var i=k.extend({},c,g);var h=d.find(i.selectors.template);var j=d.find(i.selectors.summaryTemplate);var f=function(n,s){var l=s.availableActions;var p=n.find(i.selectors.actionTemplate);for(var m=0;m<l.length;m++){var r=l[m];var o=i.invokeActionUrlTemplate.replace("NOTIFICATIONID",s.id).replace("ACTIONID",r.id);var q=p.clone();q.removeClass("action-template");q.toggleClass("hidden");q.find("a").attr("href",o).html(r.label+" ");q.appendTo(n)}n.toggleClass("hidden")};var e=function(t){if(t&&t.length!=0){var q=t.length;if(i.numberToDisplay!=undefined&&i.numberToDisplay<t.length){q=i.numberToDisplay}for(var n=0;n<q;n++){var r=t[n];var o=h.clone();o.removeClass("template");o.toggleClass("hidden");o.find(i.selectors.title).html(r.title);if(r.body){o.find(i.selectors.body).html(r.body)}if(r.url){var m=r.linkText||r.url;o.find(i.selectors.link).attr("href",r.url).html(m)}if(r.availableActions&&r.availableActions.length!=0){var l=o.find(i.selectors.actions);if(l){f(l,r)}}o.appendTo(h.parent())}if(j){var p=j.find(".showing");p.text(q);var s=j.find(".total");s.text(t.length)}i.readyCallback();d.slideDown("slow")}};a(k,i,e)};upnotice.pullFeed=function(f,d,g){var e=f.extend({},c,d);a(f,e,g)}})()};